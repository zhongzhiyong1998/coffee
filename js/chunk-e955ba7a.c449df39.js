(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e955ba7a"],{1148:function(t,e,i){"use strict";var a=i("a691"),r=i("1d80");t.exports="".repeat||function(t){var e=String(r(this)),i="",s=a(t);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(i+=e);return i}},"30c7":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg"},[i("div",{staticClass:"bg-box"}),i("div",{staticClass:"bg-content"},[t._t("default")],2)])},r=[],s=(i("d286"),{name:"Bg"}),n=s,o=i("2877"),c=Object(o["a"])(n,a,r,!1,null,"7f7dc289",null);e["a"]=c.exports},"408a":function(t,e,i){var a=i("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=a(t))throw TypeError("Incorrect invocation");return+t}},"59a0":function(t,e,i){},"5e89":function(t,e,i){var a=i("861d"),r=Math.floor;t.exports=function(t){return!a(t)&&isFinite(t)&&r(t)===t}},"65a8":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"my-orders-box"},[i("van-nav-bar",{attrs:{title:"我的订单","left-text":"返回","left-arrow":""},on:{"click-left":t.back}}),i("Bg",[i("van-tabs",{attrs:{"title-active-color":"#0c34ba",color:"#0c34ba"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[i("van-tab",{attrs:{title:"全部"}}),i("van-tab",{attrs:{title:"进行中"}}),i("van-tab",{attrs:{title:"已完成"}})],1)],1),i("div",{staticClass:"order-content"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.active||1==t.active,expression:"active==0||active==1"}],staticClass:"going-box"},t._l(t.goingOrderData,(function(e,a){return i("PayBox",{key:a,attrs:{sum:e[e.length-2],count:e[e.length-1],time:t._f("formatTime")(e[0].updatedAt)},scopedSlots:t._u([{key:"title",fn:function(){return[i("div",{staticClass:"order-type-title"},[i("div",[t._v(t._s(a))]),i("div",{staticClass:"sure",on:{click:function(e){return t.confirm(a)}}},[t._v("确认收货")])])]},proxy:!0}],null,!0)},t._l(e.slice(0,-2),(function(t,e){return i("OrderItem",{key:e,attrs:{item:t}})})),1)})),1),i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.active||2==t.active,expression:"active==0||active==2"}],staticClass:"finish-box"},t._l(t.finishOrderData,(function(e,a){return i("PayBox",{key:a,attrs:{sum:e[e.length-2],count:e[e.length-1],time:t._f("formatTime")(e[0].updatedAt)},scopedSlots:t._u([{key:"title",fn:function(){return[i("div",{staticClass:"order-type-title"},[i("div",[t._v(t._s(a))]),i("div",{staticClass:"finish"},[i("div",[t._v("已完成")]),i("div",{staticClass:"trash-box"},[i("van-icon",{attrs:{name:"delete-o",size:"18"},on:{click:function(e){return t.deleteOrderData(a)}}})],1)])])]},proxy:!0}],null,!0)},t._l(e.slice(0,-2),(function(t,e){return i("OrderItem",{key:e,attrs:{item:t}})})),1)})),1)])],1)},r=[],s=i("5530"),n=(i("59a0"),i("30c7")),o=i("bbc5"),c=i("9d57"),u=i("2f62"),l={name:"MyOrder",data:function(){return{active:0,goingOrderData:{},finishOrderData:{}}},methods:Object(s["a"])({back:function(){this.$router.push({name:"My"})},getOrderData:function(){var t=this,e=this.$cookies.get("tokenString");if(!e)return this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:this.baseUrl+"/findOrder",params:{appkey:this.appkey,tokenString:e,status:0}}).then((function(e){if(t.$toast.clear(),7e4==e.data.code){t.goingOrderData={},t.finishOrderData={};var i=e.data.result;t.sortWithOrderData(i)}})).catch((function(e){t.$toast({message:e,forbidClick:!0,duration:1e3})}))},sortWithOrderData:function(t){for(var e=0;e<t.length;e++)t[e].small_img=t[e].smallImg,1==t[e].status&&(this.goingOrderData[t[e].oid]||(this.goingOrderData[t[e].oid]=[]),this.goingOrderData[t[e].oid].push(t[e])),2==t[e].status&&(this.finishOrderData[t[e].oid]||(this.finishOrderData[t[e].oid]=[]),this.finishOrderData[t[e].oid].push(t[e]));for(var i in this.goingOrderData){for(var a=0,r=0,s=0;s<this.goingOrderData[i].length;s++)a+=parseFloat(this.goingOrderData[i][s].price)*this.goingOrderData[i][s].count,r+=this.goingOrderData[i][s].count;this.goingOrderData[i].push(a),this.goingOrderData[i].push(r)}for(var n in this.finishOrderData){for(var o=0,c=0,u=0;u<this.finishOrderData[n].length;u++)o+=parseFloat(this.finishOrderData[n][u].price)*this.finishOrderData[n][u].count,c+=this.finishOrderData[n][u].count;this.finishOrderData[n].push(o),this.finishOrderData[n].push(c)}},confirm:function(t){var e=this,i=this.$cookies.get("tokenString");if(!i)return this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:this.baseUrl+"/receive",data:{appkey:this.appkey,tokenString:i,oid:t}}).then((function(i){e.$toast.clear(),8e4==i.data.code&&(e.finishOrderData[t]=e.goingOrderData[t],e.$delete(e.goingOrderData,t),e.getOrderData(),e.$toast({message:i.data.msg,duration:1e3,forbidClick:!0}))})).catch((function(t){e.$toast({message:t,forbidClick:!0,duration:1e3})}))},deleteOrderData:function(t){var e=this,i=this.$cookies.get("tokenString");if(!i)return this.$router.push({name:"Login"});this.$toast.loading({message:"删除中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:this.baseUrl+"/removeOrder",data:{appkey:this.appkey,tokenString:i,oid:t}}).then((function(i){e.$toast.clear(),9e4==i.data.code&&(e.$delete(e.finishOrderData,t),e.$toast({message:i.data.msg,duration:1e3,forbidClick:!0}))})).catch((function(t){e.$toast({message:t,forbidClick:!0,duration:1e3})}))}},Object(u["b"])(["changeNewOrderMsg"])),components:{Bg:n["a"],PayBox:o["a"],OrderItem:c["a"]},created:function(){this.getOrderData(),this.changeNewOrderMsg(!1)},filters:{formatTime:function(t){var e=new Date(t),i=e.getFullYear(),a=e.getMonth()+1,r=e.getDate(),s=e.getHours(),n=e.getMinutes(),o=e.getSeconds();return a<10&&(a="0"+a),r<10&&(r="0"+r),s<10&&(s="0"+s),n<10&&(n="0"+n),o<10&&(o="0"+o),i+"-"+a+"-"+r+" "+s+":"+n+":"+o}},computed:Object(s["a"])({},Object(u["c"])(["isNewOrderMsg"]))},d=l,f=i("2877"),h=Object(f["a"])(d,a,r,!1,null,null,null);e["default"]=h.exports},"8ba4":function(t,e,i){var a=i("23e7"),r=i("5e89");a({target:"Number",stat:!0},{isInteger:r})},"9d57":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order-item"},[i("div",{staticClass:"img-box"},[i("img",{staticClass:"auto-img",attrs:{src:t.item.small_img}})]),i("div",{staticClass:"pro-box"},[i("div",{staticClass:"names-box"},[i("div",{staticClass:"ch-name"},[i("div",{staticClass:"name"},[t._v(t._s(t.item.name))]),i("div",{staticClass:"rule"},[t._v(t._s(t.item.rule))])]),i("div",{staticClass:"en-name"},[t._v(t._s(t.item.enname))])]),i("div",{staticClass:"pro-buy-desc-box"},[i("div",{staticClass:"price"},[t._v("¥ "+t._s(t.item.price))]),i("div",{staticClass:"count"},[t._v("x"+t._s(t.item.count))])])])])},r=[],s=(i("b275"),{name:"OrderItem",props:["item"]}),n=s,o=i("2877"),c=Object(o["a"])(n,a,r,!1,null,null,null);e["a"]=c.exports},a23d:function(t,e,i){},b275:function(t,e,i){},b680:function(t,e,i){"use strict";var a=i("23e7"),r=i("a691"),s=i("408a"),n=i("1148"),o=i("d039"),c=1..toFixed,u=Math.floor,l=function(t,e,i){return 0===e?i:e%2===1?l(t,e-1,i*t):l(t*t,e/2,i)},d=function(t){var e=0,i=t;while(i>=4096)e+=12,i/=4096;while(i>=2)e+=1,i/=2;return e},f=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){c.call({})}));a({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,i,a,o,c=s(this),f=r(t),h=[0,0,0,0,0,0],v="",g="0",m=function(t,e){var i=-1,a=e;while(++i<6)a+=t*h[i],h[i]=a%1e7,a=u(a/1e7)},b=function(t){var e=6,i=0;while(--e>=0)i+=h[e],h[e]=u(i/t),i=i%t*1e7},p=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==h[t]){var i=String(h[t]);e=""===e?i:e+n.call("0",7-i.length)+i}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(v="-",c=-c),c>1e-21)if(e=d(c*l(2,69,1))-69,i=e<0?c*l(2,-e,1):c/l(2,e,1),i*=4503599627370496,e=52-e,e>0){m(0,i),a=f;while(a>=7)m(1e7,0),a-=7;m(l(10,a,1),0),a=e-1;while(a>=23)b(1<<23),a-=23;b(1<<a),m(1,1),b(2),g=p()}else m(0,i),m(1<<-e,0),g=p()+n.call("0",f);return f>0?(o=g.length,g=v+(o<=f?"0."+n.call("0",f-o)+g:g.slice(0,o-f)+"."+g.slice(o-f))):g=v+g,g}})},bbc5:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pay-content-box"},[t._t("title"),i("div",{staticClass:"item"},[t._t("default")],2),i("div",{staticClass:"total"},[i("div",{staticClass:"time"},[t._v(t._s(t.time))]),i("div",{staticClass:"total-bottom"},[i("div",{staticClass:"total-number"},[t._v("共计 "+t._s(t.count)+" 件")]),i("div",{staticClass:"total-price"},[t._v("合计 ¥ "+t._s(t._f("formatFloat")(t.sum)))])])])],2)},r=[],s=(i("a9e3"),i("f00c"),i("8ba4"),i("b680"),i("a23d"),{name:"PayBox",props:["sum","count","time"],created:function(){},filters:{formatFloat:function(t){return Number.isInteger(t)&&(t=parseFloat(t).toFixed(2)),Number.isFinite(t)&&(t=t.toFixed(2)),t}}}),n=s,o=i("2877"),c=Object(o["a"])(n,a,r,!1,null,null,null);e["a"]=c.exports},d286:function(t,e,i){},e285:function(t,e,i){var a=i("da84"),r=a.isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&r(t)}},f00c:function(t,e,i){var a=i("23e7"),r=i("e285");a({target:"Number",stat:!0},{isFinite:r})}}]);
//# sourceMappingURL=chunk-e955ba7a.c449df39.js.map