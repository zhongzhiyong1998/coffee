{"version":3,"sources":["webpack:///./src/views/Detail.vue?5c36","webpack:///src/views/Detail.vue","webpack:///./src/views/Detail.vue?e029","webpack:///./src/views/Detail.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","back","detailData","large_img","_v","_s","name","enname","price","_l","item","index","key","title","v","i","class","active","currentIndex","$event","selectRule","model","value","callback","$$v","count","expression","shopbagCount","goShopbag","likeStatus","likeAndNotLike","addShopbag","staticRenderFns","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,OAAO,YAAY,KAAK,aAAa,IAAIC,GAAG,CAAC,aAAaR,EAAIS,QAAQL,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,WAAWC,MAAM,CAAC,IAAMP,EAAIU,WAAWC,eAAeP,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACE,YAAY,WAAW,CAACN,EAAIY,GAAGZ,EAAIa,GAAGb,EAAIU,WAAWI,SAASV,EAAG,MAAM,CAACE,YAAY,WAAW,CAACN,EAAIY,GAAGZ,EAAIa,GAAGb,EAAIU,WAAWK,aAAaX,EAAG,MAAM,CAACE,YAAY,aAAa,CAACN,EAAIY,GAAG,IAAIZ,EAAIa,GAAGb,EAAIU,WAAWM,YAAYZ,EAAG,MAAM,CAACE,YAAY,SAASN,EAAIiB,GAAIjB,EAAIU,WAAoB,WAAE,SAASQ,EAAKC,GAAO,OAAOf,EAAG,MAAM,CAACgB,IAAID,EAAMb,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIY,GAAGZ,EAAIa,GAAGK,EAAKG,UAAUjB,EAAG,MAAM,CAACE,YAAY,cAAcN,EAAIiB,GAAIC,EAAS,MAAE,SAASI,EAAEC,GAAG,OAAOnB,EAAG,MAAM,CAACgB,IAAIG,EAAEC,MAAM,CAACC,OAAOP,EAAKQ,cAAgBH,GAAGf,GAAG,CAAC,MAAQ,SAASmB,GAAQ,OAAO3B,EAAI4B,WAAWV,EAAKK,MAAM,CAACvB,EAAIY,GAAGZ,EAAIa,GAAGS,EAAED,aAAY,QAAO,GAAGjB,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACN,EAAIY,GAAG,UAAUR,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,QAAQ,cAAc,KAAK,gBAAgB,IAAIsB,MAAM,CAACC,MAAO9B,EAAS,MAAE+B,SAAS,SAAUC,GAAMhC,EAAIiC,MAAMD,GAAKE,WAAW,YAAY,KAAK9B,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIY,GAAG,YAAYR,EAAG,MAAM,CAACE,YAAY,aAAaN,EAAIiB,GAAIjB,EAAIU,WAAmB,UAAE,SAASQ,EAAKC,GAAO,OAAOf,EAAG,MAAM,CAACgB,IAAID,GAAO,CAACnB,EAAIY,GAAGZ,EAAIa,GAAGM,EAAM,GAAG,IAAInB,EAAIa,GAAGK,SAAW,OAAOd,EAAG,mBAAmB,CAACA,EAAG,wBAAwB,CAACG,MAAM,CAAC,KAAO,MAAM,KAAO,MAAM,MAAQ,OAAO,MAAQP,EAAImC,aAAa,EAAEnC,EAAImC,aAAa,IAAI3B,GAAG,CAAC,MAAQR,EAAIoC,aAAahC,EAAG,wBAAwB,CAACG,MAAM,CAAC,KAAO,OAAO,KAAOP,EAAIqC,WAAW,MAAM,KAAK,MAAQrC,EAAIqC,WAAW,UAAU,QAAQ7B,GAAG,CAAC,MAAQR,EAAIsC,kBAAkBlC,EAAG,0BAA0B,CAACG,MAAM,CAAC,MAAQ,UAAU,KAAO,UAAU,KAAO,SAASC,GAAG,CAAC,MAAQR,EAAIuC,cAAcnC,EAAG,0BAA0B,CAACG,MAAM,CAAC,MAAQ,UAAU,KAAO,SAAS,KAAO,QAAQC,GAAG,CAAC,MAAQR,EAAIoC,cAAc,IAAI,IAC3pEI,EAAkB,G,wFCwDtB,GACE,KAAF,SACE,KAFF,WAGI,MAAJ,CACM,IAAN,GACM,WAAN,GAEM,YAAN,EACM,MAAN,IAGE,QAXF,WAYI,KAAJ,2BACI,KAAJ,mBACI,KAAJ,iBACI,KAAJ,mBAEE,QAAF,gBAEI,KAFJ,WAGM,KAAN,gBAGI,iBANJ,WAMM,IAAN,OAEM,KAAN,gBACQ,QAAR,SACQ,aAAR,EACQ,SAAR,IAEM,KAAN,OACQ,OAAR,MACQ,IAAR,8BACQ,OAAR,CACU,OAAV,YACU,IAAV,YAEA,kBAGQ,GADA,EAAR,eACA,kBAEU,IAAV,mBAEA,iCAEA,KAEU,EAAV,aAEU,EAAV,qBAEY,IAAZ,GACc,MAAd,aACc,KAAd,GACc,aAAd,GAGY,GAAZ,MACc,IAAd,kBACc,EAAd,qBACgB,IAAhB,GACkB,MAAlB,GAEgB,EAAhB,gBAGc,EAAd,sBAIU,EAAV,mBACU,EAAV,WACU,EAAV,gCAEA,mBAGQ,EAAR,eACQ,EAAR,QACU,IAAV,EACU,aAAV,EACU,SAAV,UAKI,WAtEJ,SAsEA,KAEA,oBAGM,EAAN,iBAGI,KA9EJ,WA8EM,IAAN,OACA,mCAEM,IAAN,EACQ,OAAR,mBAAU,KAAV,UAGM,KAAN,gBACQ,QAAR,SACQ,aAAR,EACQ,SAAR,IAEM,KAAN,OACQ,OAAR,OACQ,IAAR,qBACQ,KAAR,CACU,OAAV,YACU,IAAV,SACU,YAAV,KAEA,kBAIQ,GAFA,EAAR,eAEA,iBAOU,OANA,EAAV,QACY,QAAZ,WACY,aAAZ,EACY,SAAZ,MAGA,gBAAY,KAAZ,UAGA,mBAEU,EAAV,kBAEA,mBAGQ,EAAR,eACQ,EAAR,QACU,IAAV,EACU,aAAV,EACU,SAAV,UAKI,eAhIJ,WAgIM,IAAN,OACA,mCAEA,IAIM,KAAN,gBACQ,QAAR,SACQ,aAAR,EACQ,SAAR,IAEM,KAAN,OACQ,OAAR,MACQ,IAAR,yBACQ,OAAR,CACU,OAAV,YACU,IAAV,SACU,YAAV,KAEA,kBAEQ,EAAR,eAEA,kBAIA,kBAEA,yBACY,EAAZ,kBAGA,mBAGQ,EAAR,eACQ,EAAR,QACU,IAAV,EACU,aAAV,EACU,SAAV,WAKI,QA9KJ,WA8KM,IAAN,OACA,mCAEM,IAAN,EACQ,OAAR,mBAAU,KAAV,UAGM,KAAN,gBACQ,QAAR,SACQ,aAAR,EACQ,SAAR,IAEM,KAAN,OACQ,OAAR,OACQ,IAAR,wBACQ,KAAR,CACU,OAAV,YACU,IAAV,SACU,YAAV,KAEA,kBAIQ,GAFA,EAAR,eAEA,iBAOU,OANA,EAAV,QACY,QAAZ,WACY,aAAZ,EACY,SAAZ,MAGA,gBAAY,KAAZ,UAGA,kBACA,mBAEY,EAAZ,kBAGA,mBAGQ,EAAR,eACQ,EAAR,QACU,IAAV,EACU,aAAV,EACU,SAAV,UAKI,eAlOJ,WAmOA,iBAEQ,KAAR,UACQ,KAAR,oBAGQ,KAAR,OACQ,KAAR,oBAII,WA9OJ,WA8OM,IAAN,OACA,mCAEM,IAAN,EACQ,OAAR,mBAAU,KAAV,UAEM,IAAN,KACM,KAAN,0CACQ,EAAR,sCAGM,KAAN,gBACQ,QAAR,SACQ,aAAR,EACQ,SAAR,IAEM,KAAN,OACQ,OAAR,OACQ,IAAR,4BACQ,KAAR,CACU,IAAV,SACU,MAAV,WACU,KAAV,YACU,OAAV,YACU,YAAV,KAEA,kBAIQ,GAFA,EAAR,eAEA,iBAOU,OANA,EAAV,QACY,QAAZ,WACY,aAAZ,EACY,SAAZ,MAGA,gBAAY,KAAZ,UAGA,kBACA,mBACY,EAAZ,qCACY,EAAZ,QACc,QAAd,WACc,aAAd,EACc,SAAd,UAKA,mBAGQ,EAAR,eACQ,EAAR,QACU,IAAV,EACU,aAAV,EACU,SAAV,UAKI,UA7SJ,WA8SM,KAAN,cAAQ,KAAR,aAGI,gBAjTJ,WAiTM,IAAN,OACM,IAAN,wBAAM,CAGA,IAAN,mCAEA,IAIM,KAAN,gBACQ,QAAR,SACQ,aAAR,EACQ,SAAR,IAEM,KAAN,OACQ,OAAR,MACQ,IAAR,6BACQ,OAAR,CACU,OAAV,YACU,YAAV,KAEA,kBAEQ,EAAR,eAEA,kBAIA,mBAEU,EAAV,kCACU,EAAV,iCAEA,mBAGQ,EAAR,eACQ,EAAR,QACU,IAAV,EACU,aAAV,EACU,SAAV,aAIA,mFAEE,SAAF,kBACA,oEC5agV,I,YCO5UC,EAAY,eACd,EACA1C,EACAyC,GACA,EACA,KACA,KACA,MAIa,aAAAC,E","file":"js/chunk-475b5a2d.be79cacd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"detail\"},[_c('van-nav-bar',{attrs:{\"title\":\"商品详情\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.back}}),_c('div',[_c('img',{staticClass:\"auto-img\",attrs:{\"src\":_vm.detailData.large_img}})]),_c('div',{staticClass:\"pro-info\"},[_c('div',{staticClass:\"pro-box\"},[_c('div',{staticClass:\"pro-name\"},[_c('div',{staticClass:\"ch-name\"},[_vm._v(_vm._s(_vm.detailData.name))]),_c('div',{staticClass:\"en-name\"},[_vm._v(_vm._s(_vm.detailData.enname))])]),_c('div',{staticClass:\"pro-price\"},[_vm._v(\"¥\"+_vm._s(_vm.detailData.price))])]),_c('div',{staticClass:\"rules\"},_vm._l((_vm.detailData.rulesData),function(item,index){return _c('div',{key:index,staticClass:\"rule\"},[_c('div',{staticClass:\"rule-title\"},[_vm._v(_vm._s(item.title))]),_c('div',{staticClass:\"rule-items\"},_vm._l((item.rule),function(v,i){return _c('div',{key:i,class:{active:item.currentIndex == i},on:{\"click\":function($event){return _vm.selectRule(item,i)}}},[_vm._v(_vm._s(v.title))])}),0)])}),0),_c('div',{staticClass:\"count-box\"},[_c('div',{staticClass:\"select-count\"},[_vm._v(\"选择数量\")]),_c('div',{staticClass:\"count\"},[_c('van-stepper',{attrs:{\"theme\":\"round\",\"button-size\":\"22\",\"disable-input\":\"\"},model:{value:(_vm.count),callback:function ($$v) {_vm.count=$$v},expression:\"count\"}})],1)]),_c('div',{staticClass:\"desc\"},[_c('div',{staticClass:\"desc-title\"},[_vm._v(\" 商品描述 \")]),_c('div',{staticClass:\"desc-text\"},_vm._l((_vm.detailData.descData),function(item,index){return _c('div',{key:index},[_vm._v(_vm._s(index+1)+\"、\"+_vm._s(item))])}),0)])]),_c('van-goods-action',[_c('van-goods-action-icon',{attrs:{\"icon\":\"bag\",\"text\":\"购物车\",\"color\":\"#666\",\"badge\":_vm.shopbagCount>0?_vm.shopbagCount:''},on:{\"click\":_vm.goShopbag}}),_c('van-goods-action-icon',{attrs:{\"icon\":\"like\",\"text\":_vm.likeStatus?'已收藏':'收藏',\"color\":_vm.likeStatus?'#0c34ba':'#666'},on:{\"click\":_vm.likeAndNotLike}}),_c('van-goods-action-button',{attrs:{\"color\":\"#5E88E0\",\"type\":\"warning\",\"text\":\"加入购物车\"},on:{\"click\":_vm.addShopbag}}),_c('van-goods-action-button',{attrs:{\"color\":\"#0733B2\",\"type\":\"danger\",\"text\":\"立即购买\"},on:{\"click\":_vm.goShopbag}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"detail\">\r\n        <van-nav-bar \r\n        title=\"商品详情\"\r\n        left-text=\"返回\"\r\n        left-arrow\r\n        @click-left=\"back\"\r\n        />\r\n        <div>\r\n            <img class=\"auto-img\" :src=\"detailData.large_img\">\r\n        </div>\r\n        <div class=\"pro-info\">\r\n            <div class=\"pro-box\">\r\n                <div class=\"pro-name\">\r\n                    <div class=\"ch-name\">{{detailData.name}}</div>\r\n                    <div class=\"en-name\">{{detailData.enname}}</div>\r\n                </div>\r\n                <div class=\"pro-price\">&yen;{{detailData.price}}</div>\r\n            </div>\r\n            <!-- 规格 -->\r\n            <div class=\"rules\">\r\n                <div class=\"rule\" v-for=\"(item,index) in detailData.rulesData\" :key=\"index\">\r\n                    <div class=\"rule-title\">{{item.title}}</div>\r\n                    <div class=\"rule-items\">\r\n                        <div :class=\"{active:item.currentIndex == i}\" v-for=\"(v,i) in item.rule\" :key=\"i\" @click=\"selectRule(item,i)\">{{v.title}}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- 数量 -->\r\n            <div class=\"count-box\">\r\n                <div class=\"select-count\">选择数量</div>\r\n                <div class=\"count\">\r\n                    <van-stepper v-model=\"count\"  theme=\"round\" button-size=\"22\" disable-input />\r\n                </div>\r\n            </div>\r\n            <!-- 商品描述 -->\r\n            <div class=\"desc\">\r\n                <div class=\"desc-title\">\r\n                    商品描述\r\n                </div>\r\n                <div class=\"desc-text\">\r\n                    <div v-for=\"(item,index) in detailData.descData\" :key=\"index\">{{index+1}}、{{item}}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <van-goods-action>\r\n            <van-goods-action-icon @click=\"goShopbag\" icon=\"bag\" text=\"购物车\" color=\"#666\" :badge=\"shopbagCount>0?shopbagCount:''\"  />\r\n            <van-goods-action-icon icon=\"like\" :text=\"likeStatus?'已收藏':'收藏'\" :color=\"likeStatus?'#0c34ba':'#666'\" @click=\"likeAndNotLike\" />\r\n            <van-goods-action-button @click=\"addShopbag\" color=\"#5E88E0\" type=\"warning\" text=\"加入购物车\" />\r\n            <van-goods-action-button @click=\"goShopbag\" color=\"#0733B2\" type=\"danger\" text=\"立即购买\" />\r\n        </van-goods-action>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import '../assets/less/detail.less'\r\n    import {mapState,mapMutations} from 'vuex'\r\n    export default {\r\n        name:'Detail',\r\n        data(){\r\n            return {\r\n                pid:'',\r\n                detailData:{},\r\n                //收藏状态\r\n                likeStatus:false,\r\n                count:1\r\n            }\r\n        },\r\n        created(){\r\n            this.pid = this.$route.params.pid;\r\n            this.getproductDetail();\r\n            this.getLikeProduct();\r\n            this.getShopbagCount();\r\n        },\r\n        methods:{\r\n            //返回上一级\r\n            back(){\r\n                this.$router.go(-1);\r\n            },\r\n            //获取商品详情\r\n            getproductDetail(){\r\n                //加载提示\r\n                this.$toast.loading({\r\n                    message: '加载中...',\r\n                    forbidClick: true,\r\n                    duration:0\r\n                });\r\n                this.axios({\r\n                    method:'GET',\r\n                    url:this.baseUrl + '/productDetail',\r\n                    params:{\r\n                        appkey:this.appkey,\r\n                        pid:this.pid\r\n                    }\r\n                }).then( res => {\r\n                    //关闭加载提示\r\n                    this.$toast.clear();\r\n                    if(res.data.code == 600) {\r\n                        //返回结果\r\n                        let result = res.data.result[0];\r\n                        //商品的规格类型\r\n                        let rules = ['cream','milk','sugar','tem'];\r\n                        //商品描述内容\r\n                        let descData = [];\r\n                        //规格的内容\r\n                        result.rulesData = [];\r\n                        //循环规格类型\r\n                        rules.forEach(v => {\r\n                            //创建一种数据结构\r\n                            let currentRule = {\r\n                                title:result[v+'_desc'],\r\n                                rule:[],\r\n                                currentIndex:0\r\n                            }\r\n                            //规格类型内容不为空，拆分对应的内容\r\n                            if(result[v]){\r\n                                let rulesText = result[v].split('/');\r\n                                rulesText.forEach(item => {\r\n                                    let o = {\r\n                                        title:item\r\n                                    };\r\n                                    currentRule.rule.push(o);\r\n                                })\r\n                                //保存\r\n                                result.rulesData.push(currentRule);\r\n                            }   \r\n                        });\r\n                        //切割商品描述内容\r\n                        descData = result.desc.split('\\n');\r\n                        result.descData = descData;\r\n                        this.detailData = res.data.result[0];\r\n                    }\r\n                }).catch(err => {\r\n                    //请求失败\r\n                    //关闭加载提示\r\n                    this.$toast.clear();\r\n                    this.$toast({\r\n                        msg:err,\r\n                        forbidClick:true,\r\n                        duration:1000\r\n                    });\r\n                });\r\n            },\r\n            //选择规格\r\n            selectRule(item,index) {\r\n                //判断是否重复点击\r\n                if(item.currentIndex == index){\r\n                    return ;\r\n                }\r\n                item.currentIndex = index;\r\n            },\r\n            //收藏\r\n            like(){\r\n                let tokenString = this.$cookies.get(\"tokenString\");\r\n                //tokenString不存在，跳转到登录\r\n                if(!tokenString){\r\n                    return this.$router.push({name:'Login'});\r\n                }\r\n                //加载提示\r\n                this.$toast.loading({\r\n                    message: '加载中...',\r\n                    forbidClick: true,\r\n                    duration:0\r\n                });\r\n                this.axios({\r\n                    method:'POST',\r\n                    url:this.baseUrl + '/like',\r\n                    data:{\r\n                        appkey:this.appkey,\r\n                        pid:this.pid,\r\n                        tokenString\r\n                    }\r\n                }).then( res => {\r\n                    //关闭加载提示\r\n                    this.$toast.clear();\r\n                    //tokenString不正确，跳转到登录\r\n                    if(res.data.code == 700) {\r\n                        this.$toast({\r\n                            message:res.data.msg,\r\n                            forbidClick:true,\r\n                            duration:1000\r\n                        });\r\n                        //跳转到登录界面\r\n                        return this.$router.push({name:'Login'});\r\n                    }\r\n                    //tokenString正确,收藏商品\r\n                    if(res.data.code == 800){\r\n                        //收藏\r\n                        this.likeStatus = true;\r\n                    }\r\n                }).catch(err => {\r\n                    //请求失败\r\n                    //关闭加载提示\r\n                    this.$toast.clear();\r\n                    this.$toast({\r\n                        msg:err,\r\n                        forbidClick:true,\r\n                        duration:1000\r\n                    });\r\n                });\r\n            },\r\n            //查询当前商品是否被收藏\r\n            getLikeProduct(){\r\n                let tokenString = this.$cookies.get(\"tokenString\");\r\n                //tokenString不存在，直接退出\r\n                if(!tokenString){\r\n                    return ;\r\n                }\r\n                //加载提示\r\n                this.$toast.loading({\r\n                    message: '加载中...',\r\n                    forbidClick: true,\r\n                    duration:0\r\n                });\r\n                this.axios({\r\n                    method:'GET',\r\n                    url:this.baseUrl + '/findlike',\r\n                    params:{\r\n                        appkey:this.appkey,\r\n                        pid:this.pid,\r\n                        tokenString\r\n                    }\r\n                }).then( res => {\r\n                    //关闭加载提示\r\n                    this.$toast.clear();\r\n                    //tokenString不正确，//直接退出\r\n                    if(res.data.code == 700) {\r\n                        return ;\r\n                    }\r\n                    //tokenString正确\r\n                    if(res.data.code == 1000){\r\n                        //判断是否以收藏\r\n                        if(res.data.result.length > 0){\r\n                            this.likeStatus = true;\r\n                        }\r\n                    }\r\n                }).catch(err => {\r\n                    //请求失败\r\n                    //关闭加载提示\r\n                    this.$toast.clear();\r\n                    this.$toast({\r\n                        msg:err,\r\n                        forbidClick:true,\r\n                        duration:1000\r\n                    });\r\n                });\r\n            },\r\n            //取消收藏\r\n            notLike(){\r\n                let tokenString = this.$cookies.get(\"tokenString\");\r\n                //tokenString不存在，跳转到登录\r\n                if(!tokenString){\r\n                    return this.$router.push({name:'Login'});\r\n                }\r\n                //加载提示\r\n                this.$toast.loading({\r\n                    message: '加载中...',\r\n                    forbidClick: true,\r\n                    duration:0\r\n                });\r\n                this.axios({\r\n                    method:'POST',\r\n                    url:this.baseUrl + '/notlike',\r\n                    data:{\r\n                        appkey:this.appkey,\r\n                        pid:this.pid,\r\n                        tokenString\r\n                    }\r\n                }).then( res => {\r\n                    //关闭加载提示\r\n                    this.$toast.clear();\r\n                    //tokenString不正确\r\n                    if(res.data.code == 700) {\r\n                        this.$toast({\r\n                            message:res.data.msg,\r\n                            forbidClick:true,\r\n                            duration:3000\r\n                        });\r\n                        //跳转到登录界面\r\n                        return this.$router.push({name:'Login'});\r\n                    }\r\n                    //tokenString正确\r\n                    if(res.data.code == 900){\r\n                        if(res.data.result == 1){\r\n                            //取消收藏\r\n                            this.likeStatus = false;\r\n                        }\r\n                    }\r\n                }).catch(err => {\r\n                    //请求失败\r\n                    //关闭加载提示\r\n                    this.$toast.clear();\r\n                    this.$toast({\r\n                        msg:err,\r\n                        forbidClick:true,\r\n                        duration:1000\r\n                    });\r\n                });\r\n            },\r\n            //收藏/取消收藏\r\n            likeAndNotLike(){\r\n                if(this.likeStatus){\r\n                    //取消收藏\r\n                    this.notLike();\r\n                    this.changeNewLike(false);\r\n                }else {\r\n                    //收藏\r\n                    this.like();\r\n                    this.changeNewLike(true);\r\n                }\r\n            },\r\n            //添加购物袋\r\n            addShopbag(){\r\n                let tokenString = this.$cookies.get(\"tokenString\");\r\n                //tokenString不存在，跳转到登录\r\n                if(!tokenString){\r\n                    return this.$router.push({name:'Login'});\r\n                }\r\n                let rules = [];\r\n                this.detailData.rulesData.forEach(v => {\r\n                    rules.push(v.rule[v.currentIndex].title);\r\n                })\r\n                //加载提示\r\n                this.$toast.loading({\r\n                    message: '加载中...',\r\n                    forbidClick: true,\r\n                    duration:0\r\n                });\r\n                this.axios({\r\n                    method:'POST',\r\n                    url:this.baseUrl + '/addShopcart',\r\n                    data:{\r\n                        pid:this.pid,\r\n                        count:this.count,\r\n                        rule:rules.join(\"/\"),\r\n                        appkey:this.appkey,\r\n                        tokenString\r\n                    }\r\n                }).then( res => {\r\n                    //关闭加载提示\r\n                    this.$toast.clear();\r\n                    //tokenString不正确，跳转到登录\r\n                    if(res.data.code == 700) {\r\n                        this.$toast({\r\n                            message:res.data.msg,\r\n                            forbidClick:true,\r\n                            duration:1000\r\n                        });\r\n                        //跳转到登录界面\r\n                        return this.$router.push({name:'Login'});\r\n                    }\r\n                    //tokenString正确,添加商品\r\n                    if(res.data.code == 3000){\r\n                        if(res.data.status == 1){\r\n                            this.changeShopbagCount(this.shopbagCount + 1);\r\n                            this.$toast({\r\n                                message:res.data.msg,\r\n                                forbidClick:true,\r\n                                duration:500,\r\n                            });\r\n                        }\r\n                        \r\n                    }\r\n                }).catch(err => {\r\n                    //请求失败\r\n                    //关闭加载提示\r\n                    this.$toast.clear();\r\n                    this.$toast({\r\n                        msg:err,\r\n                        forbidClick:true,\r\n                        duration:1000\r\n                    });\r\n                });\r\n            },\r\n            //跳转到购物车\r\n            goShopbag(){\r\n                this.$router.push({name:'Shopcar'});\r\n            },\r\n            //获取商品总数量\r\n            getShopbagCount(){\r\n                if(this.isLoadShopbagCount){\r\n                    return ;\r\n                }\r\n                let tokenString = this.$cookies.get(\"tokenString\");\r\n                //tokenString不存在，直接退出\r\n                if(!tokenString){\r\n                    return ;\r\n                }\r\n                //加载提示\r\n                this.$toast.loading({\r\n                    message: '加载中...',\r\n                    forbidClick: true,\r\n                    duration:0\r\n                });\r\n                this.axios({\r\n                    method:'GET',\r\n                    url:this.baseUrl + '/shopcartRows',\r\n                    params:{\r\n                        appkey:this.appkey,\r\n                        tokenString\r\n                    }\r\n                }).then( res => {\r\n                    //关闭加载提示\r\n                    this.$toast.clear();\r\n                    //tokenString不正确，//直接退出\r\n                    if(res.data.code == 700) {\r\n                        return ;\r\n                    }\r\n                    //tokenString正确\r\n                    if(res.data.code == 8000){\r\n                        //提交changeShopbagCount的mutations\r\n                        this.changeShopbagCount(res.data.result);\r\n                        this.changeIsLoadShopbagCount(true);\r\n                    }\r\n                }).catch(err => {\r\n                    //请求失败\r\n                    //关闭加载提示\r\n                    this.$toast.clear();\r\n                    this.$toast({\r\n                        msg:err,\r\n                        forbidClick:true,\r\n                        duration:1000\r\n                    });\r\n                });\r\n            },\r\n            ...mapMutations([\"changeShopbagCount\",'changeIsLoadShopbagCount',\"changeNewLike\"]),\r\n        },\r\n        computed:{\r\n            ...mapState(['shopbagCount',\"isLoadShopbagCount\",\"isNewLike\"])\r\n        }\r\n       \r\n    }\r\n</script>\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=62edc42e&\"\nimport script from \"./Detail.vue?vue&type=script&lang=js&\"\nexport * from \"./Detail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}