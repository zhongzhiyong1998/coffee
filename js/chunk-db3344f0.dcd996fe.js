(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-db3344f0"],{1148:function(t,s,e){"use strict";var a=e("a691"),i=e("1d80");t.exports="".repeat||function(t){var s=String(i(this)),e="",r=a(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(s+=s))1&r&&(e+=s);return e}},3174:function(t,s,e){},"408a":function(t,s,e){var a=e("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=a(t))throw TypeError("Incorrect invocation");return+t}},"5e89":function(t,s,e){var a=e("861d"),i=Math.floor;t.exports=function(t){return!a(t)&&isFinite(t)&&i(t)===t}},"76a1":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"pay-box"},[e("van-nav-bar",{attrs:{title:"订单结算","left-text":"返回","left-arrow":""},on:{"click-left":t.back}}),e("div",{staticClass:"content-box"},[e("div",{staticClass:"select-box"},[e("div",{staticClass:"select"},[e("div",{on:{click:t.selectAddress}},[t._v("选择地址")]),e("van-icon",{attrs:{name:"arrow"}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showAddress,expression:"showAddress"}],staticClass:"s-address"},[e("span",{staticClass:"name"},[t._v(t._s(t.showAddress.name))]),e("span",{staticClass:"phone"},[t._v(t._s(t.showAddress.tel))]),t.showAddress.isDefault?e("span",{staticClass:"mark"},[t._v("默认")]):t._e(),e("div",{staticClass:"address-desc"},[t._v(t._s(t.showAddress.province+t.showAddress.city+t.showAddress.county+t.showAddress.addressDetail))])])]),e("PayBox",{attrs:{sum:t.sum,count:t.count},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"pay-title"},[t._v("订单信息")])]},proxy:!0}])},[e("div",{staticClass:"order-items"},t._l(t.goodSData,(function(t,s){return e("OrderItem",{key:s,attrs:{item:t}})})),1)]),e("van-button",{attrs:{block:"",round:"",color:"#0c34ba"},on:{click:t.payMoney}},[t._v("立即结算")])],1),e("van-popup",{attrs:{closeable:"",position:"bottom"},model:{value:t.isSelectAddress,callback:function(s){t.isSelectAddress=s},expression:"isSelectAddress"}},[e("div",{staticClass:"select-address-title"},[t._v("选择地址")]),e("div",{staticClass:"select-address-box"},[e("van-address-list",{attrs:{list:t.list,"default-tag-text":"默认"},on:{add:t.addAddress},model:{value:t.chosenAddress,callback:function(s){t.chosenAddress=s},expression:"chosenAddress"}})],1)])],1)},i=[],r=(e("b0c0"),e("5530")),o=(e("3174"),e("bbc5")),n=e("9d57"),d=e("2f62"),c={name:"Pay",data:function(){return{sids:[],list:[],goodSData:[],sum:0,count:0,addressData:[],showAddress:{},isSelectAddress:!1,chosenAddress:""}},methods:Object(r["a"])(Object(r["a"])({},Object(d["b"])(["changeIsLoadShopbagCount","changeNewOrderMsg"])),{},{back:function(){this.$router.go(-1)},getGoodsData:function(t){var s=this;if(t){var e=this.$cookies.get("tokenString");if(!e)return this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:this.baseUrl+"/commitShopcart",params:{appkey:this.appkey,tokenString:e,sids:JSON.stringify(t)}}).then((function(t){if(s.$toast.clear(),700==t.data.code)return s.$toast({message:t.data.msg,forbidClick:!0,duration:1e3}),s.$router.push({name:"Login"});5e4==t.data.code&&(s.goodSData=t.data.result,s.totalPrice(),s.goodsCount())})).catch((function(t){s.$toast.clear(),s.$toast({msg:t,forbidClick:!0,duration:1e3})}))}},totalPrice:function(){for(var t=0,s=0;s<this.goodSData.length;s++)t+=parseFloat(this.goodSData[s].price)*this.goodSData[s].count;this.sum=t},goodsCount:function(){for(var t=0,s=0;s<this.goodSData.length;s++)t+=this.goodSData[s].count;this.count=t},getAddressData:function(){var t=this,s=this.$cookies.get("tokenString");if(!s)return this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:this.baseUrl+"/findAddress",params:{appkey:this.appkey,tokenString:s}}).then((function(s){if(t.$toast.clear(),700==s.data.code)return t.$toast({message:s.data.msg,forbidClick:!0,duration:1e3}),t.$router.push({name:"Login"});2e4==s.data.code&&(t.addressData=s.data.result,t.getShowAddress())})).catch((function(s){t.$toast.clear(),t.$toast({msg:s,forbidClick:!0,duration:1e3})}))},getShowAddress:function(){for(var t=0;t<this.addressData.length;t++)if(this.addressData[t].isDefault)return this.chosenAddress=this.addressData[t].id,void(this.showAddress=this.addressData[t]);0!=this.addressData.length?(this.showAddress=this.addressData[0],this.chosenAddress=this.addressData[0].id):this.showAddress=0},selectAddress:function(){this.isSelectAddress=!0,this.list=[];for(var t=0;t<this.addressData.length;t++){var s={};s.id=this.addressData[t].id,s.name=this.addressData[t].name,s.tel=this.addressData[t].tel,s.address=this.addressData[t].province+this.addressData[t].city+this.addressData[t].county+this.addressData[t].addressDetail,s.isDefault=!!this.addressData[t].isDefault,this.list.push(s)}},addAddress:function(){this.$router.push({name:"Address"})},payMoney:function(){var t=this,s=this.$cookies.get("tokenString");if(!s)return this.$router.push({name:"Login"});this.$toast.loading({message:"结算中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:this.baseUrl+"/pay",data:{appkey:this.appkey,tokenString:s,sids:JSON.stringify(this.sids),phone:this.showAddress.tel,address:this.showAddress.province+this.showAddress.city+this.showAddress.county+this.showAddress.addressDetail,receiver:this.showAddress.name}}).then((function(s){if(t.$toast.clear(),700==s.data.code)return t.$toast({message:s.data.msg,forbidClick:!0,duration:1e3}),t.$router.push({name:"Login"});6e4==s.data.code&&(t.changeIsLoadShopbagCount(!1),t.changeNewOrderMsg(!0),t.$router.push({name:"Shopcar"}))})).catch((function(s){t.$toast.clear(),t.$toast({msg:s,forbidClick:!0,duration:1e3})}))}}),components:{PayBox:o["a"],OrderItem:n["a"]},created:function(){this.sids=this.$route.params.sids,this.sids,this.getGoodsData(this.sids),this.getAddressData()},watch:{chosenAddress:function(t){for(var s=0;s<this.addressData.length;s++)if(this.addressData[s].id==t){this.showAddress=this.addressData[s];break}}}},l=c,u=e("2877"),h=Object(u["a"])(l,a,i,!1,null,null,null);s["default"]=h.exports},"8ba4":function(t,s,e){var a=e("23e7"),i=e("5e89");a({target:"Number",stat:!0},{isInteger:i})},"9d57":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"order-item"},[e("div",{staticClass:"img-box"},[e("img",{staticClass:"auto-img",attrs:{src:t.item.small_img}})]),e("div",{staticClass:"pro-box"},[e("div",{staticClass:"names-box"},[e("div",{staticClass:"ch-name"},[e("div",{staticClass:"name"},[t._v(t._s(t.item.name))]),e("div",{staticClass:"rule"},[t._v(t._s(t.item.rule))])]),e("div",{staticClass:"en-name"},[t._v(t._s(t.item.enname))])]),e("div",{staticClass:"pro-buy-desc-box"},[e("div",{staticClass:"price"},[t._v("¥ "+t._s(t.item.price))]),e("div",{staticClass:"count"},[t._v("x"+t._s(t.item.count))])])])])},i=[],r=(e("b275"),{name:"OrderItem",props:["item"]}),o=r,n=e("2877"),d=Object(n["a"])(o,a,i,!1,null,null,null);s["a"]=d.exports},a23d:function(t,s,e){},b0c0:function(t,s,e){var a=e("83ab"),i=e("9bf2").f,r=Function.prototype,o=r.toString,n=/^\s*function ([^ (]*)/,d="name";a&&!(d in r)&&i(r,d,{configurable:!0,get:function(){try{return o.call(this).match(n)[1]}catch(t){return""}}})},b275:function(t,s,e){},b680:function(t,s,e){"use strict";var a=e("23e7"),i=e("a691"),r=e("408a"),o=e("1148"),n=e("d039"),d=1..toFixed,c=Math.floor,l=function(t,s,e){return 0===s?e:s%2===1?l(t,s-1,e*t):l(t*t,s/2,e)},u=function(t){var s=0,e=t;while(e>=4096)s+=12,e/=4096;while(e>=2)s+=1,e/=2;return s},h=d&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n((function(){d.call({})}));a({target:"Number",proto:!0,forced:h},{toFixed:function(t){var s,e,a,n,d=r(this),h=i(t),f=[0,0,0,0,0,0],m="",v="0",g=function(t,s){var e=-1,a=s;while(++e<6)a+=t*f[e],f[e]=a%1e7,a=c(a/1e7)},p=function(t){var s=6,e=0;while(--s>=0)e+=f[s],f[s]=c(e/t),e=e%t*1e7},b=function(){var t=6,s="";while(--t>=0)if(""!==s||0===t||0!==f[t]){var e=String(f[t]);s=""===s?e:s+o.call("0",7-e.length)+e}return s};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(d!=d)return"NaN";if(d<=-1e21||d>=1e21)return String(d);if(d<0&&(m="-",d=-d),d>1e-21)if(s=u(d*l(2,69,1))-69,e=s<0?d*l(2,-s,1):d/l(2,s,1),e*=4503599627370496,s=52-s,s>0){g(0,e),a=h;while(a>=7)g(1e7,0),a-=7;g(l(10,a,1),0),a=s-1;while(a>=23)p(1<<23),a-=23;p(1<<a),g(1,1),p(2),v=b()}else g(0,e),g(1<<-s,0),v=b()+o.call("0",h);return h>0?(n=v.length,v=m+(n<=h?"0."+o.call("0",h-n)+v:v.slice(0,n-h)+"."+v.slice(n-h))):v=m+v,v}})},bbc5:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"pay-content-box"},[t._t("title"),e("div",{staticClass:"item"},[t._t("default")],2),e("div",{staticClass:"total"},[e("div",{staticClass:"time"},[t._v(t._s(t.time))]),e("div",{staticClass:"total-bottom"},[e("div",{staticClass:"total-number"},[t._v("共计 "+t._s(t.count)+" 件")]),e("div",{staticClass:"total-price"},[t._v("合计 ¥ "+t._s(t._f("formatFloat")(t.sum)))])])])],2)},i=[],r=(e("a9e3"),e("f00c"),e("8ba4"),e("b680"),e("a23d"),{name:"PayBox",props:["sum","count","time"],created:function(){},filters:{formatFloat:function(t){return Number.isInteger(t)&&(t=parseFloat(t).toFixed(2)),Number.isFinite(t)&&(t=t.toFixed(2)),t}}}),o=r,n=e("2877"),d=Object(n["a"])(o,a,i,!1,null,null,null);s["a"]=d.exports},e285:function(t,s,e){var a=e("da84"),i=a.isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&i(t)}},f00c:function(t,s,e){var a=e("23e7"),i=e("e285");a({target:"Number",stat:!0},{isFinite:i})}}]);
//# sourceMappingURL=chunk-db3344f0.dcd996fe.js.map